<!doctype html><html lang="ko"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QR Order - Admin</title><link rel="stylesheet" href="/public/styles.css"/></head>
<body><div class="container">
  <div class="row" style="justify-content:space-between"><h1>QR Order - Admin</h1>
    <div class="row">
      <button id="btnSync" class="btn">주문 동기화</button>
      <a id="btnExcel" class="btn" href="/api/adb/export/orders.xlsx">엑셀 다운로드</a>
      <button id="btnLogout" class="btn">로그아웃</button>
    </div>
  </div>
  <div class="nav">
    <button data-tab="orders" class="btn primary">주문목록</button>
    <button data-tab="menu" class="btn">메뉴 관리</button>
    <button data-tab="qr" class="btn">QR 배포</button>
    <button data-tab="stats" class="btn">판매 통계</button>
    <button data-tab="settings" class="btn">설정</button>
  </div>

  <div id="tab-orders" class="card">
    <div class="row"><span class="muted">총 <span id="ordersCount">0</span>건</span><button id="refreshOrders" class="btn">새로고침</button></div>
    <table class="table" id="ordersTable"><thead><tr><th>시간</th><th>테이블</th><th>메뉴</th><th>금액</th><th>상태</th><th>지움</th><th>환불</th></tr></thead><tbody></tbody></table>
  </div>

  <div id="tab-menu" class="card" style="display:none">
    <div class="row"><strong>새 메뉴 추가</strong></div>
    <div class="row">
      <input id="addMenuId" placeholder="ID (영문/숫자)">
      <input id="addMenuName" placeholder="이름">
      <input id="addMenuPrice" type="number" placeholder="가격">
      <label class="muted"><input id="addMenuSoldout" type="checkbox"> 품절</label>
      <label class="muted"><input id="addMenuActive" type="checkbox" checked> 활성</label>
      <button id="btnAddMenu" class="btn accent">추가</button>
    </div>
    <div class="row"><button id="refreshMenu" class="btn">미러링 갱신</button></div>
    <table class="table" id="menuTable"><thead><tr><th>ID</th><th>이름</th><th>가격</th><th>품절</th><th>활성</th><th>저장</th></tr></thead><tbody></tbody></table>
  </div>

  <div id="tab-qr" class="card" style="display:none">
    <div class="grid grid2">
      <div class="card">
        <h3>QR 생성</h3>
        <div class="row"><input id="orderDomain" placeholder="https://<주문도메인>"/></div>
        <div class="row"><input id="tableNo" placeholder="테이블 번호"/></div>
        <div class="row"><button id="genQR" class="btn primary">QR 만들기</button></div>
        <div id="qrWrap" class="row"></div>
        <div class="row"><button id="saveQR" class="btn">QR 기록 저장</button></div>
      </div>
      <div class="card">
        <h3>일일 코드 캐시</h3>
        <div class="row"><button id="cacheCode" class="btn">코드 불러와 저장</button><span id="codeMsg" class="muted"></span></div>
      </div>
    </div>
  </div>

  <div id="tab-stats" class="card" style="display:none">
    <div class="row">
      <select id="period"><option value="daily">일간</option><option value="weekly">주간</option><option value="monthly">월간</option><option value="yearly">연간</option></select>
      <button id="loadStats" class="btn">불러오기</button>
    </div>
    <canvas id="chart"></canvas>
    <table class="table" id="statsTable"><thead><tr><th>기간</th><th>주문수</th><th>매출합계</th></tr></thead><tbody></tbody></table>
  </div>

  <div id="tab-settings" class="card" style="display:none">
    <p class="muted">Vercel 무료 + Neon 무료 + Toss 샌드박스만 사용합니다.</p>
    <ul><li>API_BASE: 주문 도메인</li><li>ADMIN_PASSWORD: 로그인 비밀번호</li><li>DATABASE_URL: Neon 연결 문자열</li></ul>
  </div>
</div>
<script type="module" src="/public/dashboard.js"></script>
</body></html>