<!doctype html><html lang="ko"><head><meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>배달/예약 로그인</title>
<style>
body{font-family:system-ui,Noto Sans KR,sans-serif;background:#0b1220;color:#e6edf3;margin:0}
.wrap{max-width:680px;margin:30px auto;padding:16px}
.card{background:#0f172a;border:1px solid #223;border-radius:12px;padding:16px}
h1{margin:0 0 12px 0}
.row{display:flex;gap:8px;align-items:center;margin:8px 0}
input{flex:1;padding:10px;border-radius:8px;border:1px solid #335;background:#0b1a2b;color:#e6edf3}
.btn{padding:12px 14px;border-radius:10px;border:1px solid #335;background:#14324a;color:#e6edf3;cursor:pointer}
.btn.full{display:block;width:100%;font-size:16px}
.linkrow{display:flex;gap:8px;justify-content:space-between;margin-top:8px}
a{color:#9bd; text-decoration:none}
a:hover{text-decoration:underline}
.hist{margin-top:16px}
.small{opacity:.8;font-size:12px}
</style></head><body><div class="wrap">
<h1>배달/예약 로그인</h1>
<div class="card">
  <div class="row"><input id="loginId" placeholder="아이디"/></div>
  <div class="row"><input id="loginPw" type="password" placeholder="비밀번호"/></div>
  <button class="btn full" id="loginBtn">로그인</button>
  <div class="linkrow">
    <a href="#" onclick="alert('아이디찾기: 운영자에게 문의하세요');return false;">아이디 찾기</a>
    <a href="#" onclick="alert('비밀번호찾기: 운영자에게 문의하세요');return false;">비밀번호 찾기</a>
    <a href="#" onclick="alert('회원가입은 매장에 문의해주세요');return false;">회원가입</a>
  </div>
</div>

<div class="card hist">
  <h3>이전 주문</h3>
  <div id="history"></div>
  <div class="small">이 브라우저에서 주문했던 최근 내역을 보여줍니다.</div>
</div>
<script>
function fmt(n){return (n||0).toLocaleString('ko-KR');}
function renderHistory(){
  const box=document.getElementById('history');
  const arr=JSON.parse(localStorage.getItem('qrOrderHistory')||'[]');
  if(!arr.length){ box.innerHTML='<div class="small">표시할 내역이 없습니다.</div>'; return; }
  box.innerHTML = arr.slice(-20).reverse().map(o=>{
    const when = new Date(o.time||Date.now()); const m=String(when.getMonth()+1).padStart(2,'0'); const d=String(when.getDate()).padStart(2,'0');
    const hh=String(when.getHours()).padStart(2,'0'); const mi=String(when.getMinutes()).padStart(2,'0');
    const items=(o.items||[]).map(p=>p[0]+'×'+p[1]).join(', ');
    return `<div style="padding:6px 0;border-bottom:1px solid #223">${m}/${d} ${hh}:${mi} · ${items} · 합계 ${fmt(o.amount)}원</div>`;
  }).join('');
}
document.getElementById('loginBtn').onclick=function(){
  const id=document.getElementById('loginId').value.trim();
  const pw=document.getElementById('loginPw').value.trim();
  if(!id||!pw){ alert('아이디/비밀번호를 입력해주세요'); return; }
  sessionStorage.setItem('qrLoginUser', JSON.stringify({ id, ts:Date.now() }));
  location.href='/delivery/home';
};
renderHistory();
</script>
</div></body></html>